<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <!-- PWA/Mini App: Обязательно добавляем viewport-fit=cover для использования всего экрана в Telegram и PWA. 
         Это критично для корректного отображения на iPhone в "Safe Area" (зона под "челкой" и панелями). -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <!-- PWA: Мета-тег для динамической установки цвета адресной строки/заголовка PWA. Скрипт ниже обновит его. -->
    <meta name="theme-color" content="#ffffff" id="pwa-theme-color" />
    <title>Символы Якутии</title>
    <link rel="stylesheet" href="/css/ykt.webflow.shared.5431d4cba.css">
    <!-- Telegram Web Apps SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
    <script src="js/jquery-3.5.1.min.dc5e7f18c8.js" type="text/javascript" crossorigin="anonymous"></script><script src="js/webflow.27bcb578.1d6738fa52905201.js" type="text/javascript"></script>

    <!-- Скрипт для адаптации темы Mini App и PWA -->
    <script>
      function initializeTelegramTheme() {
        if (window.Telegram && window.Telegram.WebApp) {
          const WebApp = window.Telegram.WebApp;
          WebApp.ready();
          
          const themeParams = WebApp.themeParams;
          
          // 1. Определение цветов Telegram и адаптация Mini App
          const isDark = WebApp.colorScheme === 'dark';
          const bgColor = themeParams.bg_color || (isDark ? '#181818' : '#ffffff');
          const secondaryBgColor = themeParams.secondary_bg_color || (isDark ? '#202020' : '#f0f0f0');

          // Устанавливает цвет заголовка (меню) Mini App
          WebApp.setHeaderColor(secondaryBgColor);
          // Устанавливает цвет фона всего Mini App
          WebApp.setBackgroundColor(bgColor);

          // 2. PWA: Обновляем мета-тег для цвета адресной строки браузера (для iOS/Android)
          const pwaThemeColorMeta = document.getElementById('pwa-theme-color');
          if (pwaThemeColorMeta) {
              pwaThemeColorMeta.setAttribute('content', secondaryBgColor);
          }

          // 3. Синхронизация CSS классов с вашей логикой Vue
          const themeElementsSelector = '.text, .text-2, .text-3, .text-4, .frame-447';
          
          if (isDark) {
            // Если тема темная, применяем класс 'dark' к <html> и целевым элементам
            document.documentElement.classList.add('dark');
            const elementsToTheme = document.querySelectorAll(themeElementsSelector);
            elementsToTheme.forEach(el => el.classList.add('dark'));
            
            // Опционально: Обновляем localStorage, чтобы Vue не переключал тему обратно при старте
            localStorage.setItem('theme', 'dark');

          } else {
            // Если тема светлая, убеждаемся, что класс 'dark' удален
            document.documentElement.classList.remove('dark');
            const elementsToTheme = document.querySelectorAll(themeElementsSelector);
            elementsToTheme.forEach(el => el.classList.remove('dark'));
            
            // Опционально: Обновляем localStorage
            localStorage.setItem('theme', 'light');
          }


          // 4. Передаем переменные темы в CSS для использования в Vue
          document.documentElement.style.setProperty('--tg-bg-color', bgColor);
          document.documentElement.style.setProperty('--tg-secondary-bg-color', secondaryBgColor);
          document.documentElement.style.setProperty('--tg-text-color', themeParams.text_color || '#000000');
          document.documentElement.style.setProperty('--tg-hint-color', themeParams.hint_color || '#aaaaaa');

        } else {
          console.warn("Telegram WebApp не инициализирован. Используется тема по умолчанию.");
          // Здесь можно добавить логику для установки темы по умолчанию, если localStorage пуст
        }
      }

      window.addEventListener('DOMContentLoaded', initializeTelegramTheme);
    </script>
  </body>
</html>
